/*
 * Jquery delayKeyup, devidePercent, displayMessage, pushCB, pushAllCB, validField
 * Author : Truong Nguyen 
 * Update : 2013/12/13
 */
$.fn.delayKeyup=function(a,b){var c=0;var d=$(this);var e=(b)?b:400;$(this).keyup(function(){clearTimeout(c);c=setTimeout(function(){a(d)},e)});return $(this)};$.fn.displayMessage=function(a,b){($('#'+this[0].id+'Error').length>0)?$('#'+this[0].id+'Error').remove():null;if(a){var c=parseInt(this.outerWidth(true));var d=parseInt(this.outerHeight(true));var e=parseInt(this.position().left)+c+2;var f=parseInt(this.position().top)+parseInt(this.css('margin-top'))+parseInt(this.css('padding-top'))-2;if(typeof b=='undefined'){var b={}}this.after('<div id="'+this[0].id+'Error'+'">'+a+'</div>');$('#'+this[0].id+'Error').css({'z-index':'1000','font-size':'12px','border-radius':'2px','left':e,'top':f,'max-width':(b.width)?b.width:parseInt(this.css('width'))+parseInt(this.css('padding-left'))+parseInt(this.css('padding-right'))+'px','position':(b.position)?'':'absolute','color':(b.color)?b.color:'#FF0000','border':(b.border)?b.border:'1px solid #AAAAAA','margin':(b.margin)?b.margin:'','padding':(b.padding)?b.padding:'','background':(b.background)?(b.background):'#FFFFFF',})}};$.fn.devidePercent=function(a){$(this).addClass('percent_wrapper');$(this).children('div:first').addClass('head');$(this).children('div:gt(0)').addClass('rows');$(this).children('div').children('div').each(function(){$(this).addClass('regions');if($(this).index()==a.length-1){$(this).css('border-right','none')}});var b=new Array();var c=0;var d=$(this).width();var e=['padding-left','padding-right','margin-left','margin-right','border-left-width','border-right-width'];$(this).children('div:first').children('div').each(function(){for(i=0;i<e.length;i++){d-=!isNaN(parseInt($(this).css(e[i])))?parseInt($(this).css(e[i])):0}});for(i=0;i<a.length-1;i++){var f=d/100*a[i];b.push(parseInt(f));c+=parseInt(f)}b.push(parseInt(d-c-1));$(this).children('div').children('div .regions').each(function(){$(this).css('width',b[$(this).index()])});$(this).children('div:first').children('div').equalHeights();$(this).children('div:gt(0)').children('div').equalHeights();$(this).find('input:checkbox').each(function(){$(this).parent().wrapAll('<label style="cursor: pointer;"></label>')})};$.fn.pushCB=function(a){if($(a).prop('checked')==true){var b=($(this).val())?',':'';$(this).attr('value',$(this).val()+b+$(a).val())}else{var c=$(this).val().split(',');c.splice(c.indexOf($(a).val()),1);$(this).attr('value',c.join(','))}};$.fn.pushAllCB=function(a,b){var c=$(this).prop('id');if($(a).prop('checked')==true){var d=$(this).val().split(',');$('input[name="'+b+'"]').prop('checked',true);$('input[name="'+b+'"]').each(function(){if($.inArray($(this).val(),d)==-1){$('#'+c).pushCB(this)}})}else{$('input[name="'+b+'"]').prop('checked',false);$('input[name="'+b+'"]').each(function(){$('#'+c).pushCB(this)})}};$.fn.validField=function(a){var b={0:'This field is required.',1:{reg:/^[A-Za-z]+$/,mess:'Only accept char'},2:{reg:/^(^$|(19|20)\d\d[-](0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01]))$/,mess:'Only accept date format yyyy-mm-dd'},3:{reg:/^[a-zA-Z0-9-_\.]+\.(pdf|txt|doc|csv)$/,mess:'Only accsept file format pdf|txt|doc|csv'},4:{reg:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,mess:'Only accept IP adress valid'},5:{reg:/^[\w]+$/,mess:'Accept char or number or _'},6:{reg:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,6})+$/,mess:'Email adress invalid'},7:{reg:/[\',\",\`\~\!\@\#\$\%\^\&\*\|\,\\,\<,\>,\+,\/,\;\.]/,mess:'Don\'t accept special char '},8:{reg:/^((ht|f)tps?:\/\/)[a-z0-9-\.]+\.[a-z]{2,4}\/?([^\s<>\#%\"\,\{\}\\|\\\^`]+)?$/,mess:'Url invalid'}};$(this).displayMessage();var c=$(this).val();if($.trim(c)==''){if(a.notnull){var d=b[0];$(this).displayMessage(d);return false}return true}else{if(typeof a.reg!='undefined'){var e=(a.reg in b)?b[a.reg].reg:a.reg;var f=(a.unmatch)?!RegExp(e).test(c):RegExp(e).test(c);if(f){return true}var d=(typeof a.mess!='undefined')?a.mess:(a.reg in b)?b[a.reg].mess:'';$(this).displayMessage(d)}return false}};
